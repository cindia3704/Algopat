/*
    작성자: 김지수
    작성일: 2022/06/30
    백준 -- 테트로미노 (14500번)
*/

#include <iostream>
#include <cstring>
#include <algorithm>
#define MAX 506
using namespace std;

int ans =0;

int shape[19][4][4]={
    {{1,1,1,1},{0,0,0,0},{0,0,0,0},{0,0,0,0}},{{1,0,0,0},{1,0,0,0},{1,0,0,0},{1,0,0,0}},
    {{1,1,0,0},{1,1,0,0},{0,0,0,0},{0,0,0,0}},
    {{1,0,0,0},{1,0,0,0},{1,1,0,0},{0,0,0,0}}, {{1,1,1,0},{1,0,0,0},{0,0,0,0},{0,0,0,0}},{{1,1,0,0},{0,1,0,0},{0,1,0,0},{0,0,0,0}},
    {{0,0,1,0},{1,1,1,0},{0,0,0,0},{0,0,0,0}},{{0,1,0,0},{0,1,0,0},{1,1,0,0},{0,0,0,0}},{{1,0,0,0},{1,1,1,0},{0,0,0,0},{0,0,0,0}},
    {{1,1,0,0},{1,0,0,0},{1,0,0,0},{0,0,0,0}},{{1,1,1,0},{0,0,1,0},{0,0,0,0},{0,0,0,0}},
    {{1,0,0,0},{1,1,0,0},{0,1,0,0},{0,0,0,0}},{{0,1,1,0},{1,1,0,0},{0,0,0,0},{0,0,0,0}},{{0,1,0,0},{1,1,0,0},{1,0,0,0},{0,0,0,0}},{{1,1,0,0},{0,1,1,0},{0,0,0,0},{0,0,0,0}},
    {{1,1,1,0},{0,1,0,0},{0,0,0,0},{0,0,0,0}},{{0,1,0,0},{1,1,0,0},{0,1,0,0},{0,0,0,0}},{{0,1,0,0},{1,1,1,0},{0,0,0,0},{0,0,0,0}},{{1,0,0,0},{1,1,0,0},{1,0,0,0},{0,0,0,0}}
};

int board[MAX][MAX];

void addSticker(int y,int x, int h, int w){
    for(int i=0;i<19;i++){
        int sum = 0;
        for(int j=0;j<4;j++){
            for(int k=0;k<4;k++){
               if(shape[i][j][k] == 1){
                   if(j+y <0 || j+y >=h || k+x<0 || k+x>=w){
                       continue;
                   }else{
                       sum+=board[j+y][k+x];
                   }
               }
            }
        }
        ans = max(ans,sum);
    }
}

void findMax(int h,int w){
    for(int i=0;i<h;i++){
        for(int j=0;j<w;j++){
            addSticker(i,j,h,w);
        }
    }
}

int main(void){
    ios::sync_with_stdio(false);
    cin.tie(0);

    memset(board,-0x7fffffff,sizeof(board));
    int height,width;
    cin>>height>>width;
    for(int i=0;i<height;i++){
        for(int j=0;j<width;j++){
            cin>>board[i][j];
        }
    }
    findMax(height,width);
    cout<<ans;
    
}